<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Álványos szolgálat</title>
  <link rel="icon" type="image/png" href="favicon.ico">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      padding: 20px;
    }

    .dark-mode {
      background-color: #000;
      color: white;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }

    td,
    th {
      border: 1px solid #000;
      padding: 4px;
      font-size: 12px;
    }

    button {
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <div class=" flex h-16"></div>
  <div class="flex-1 p-6 max-w-2xl mx-auto">
    <h1 class="text-4xl font-bold text-center">Álványos szolgálat</h1>
    <button id="previous"
      class="block mx-auto mt-4 px-7 py-2 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800 transition"
      onclick="window.open('ellozo.html', '_self')">-</button>
    <button id="current"
      class="block mx-auto mt-4 px-7 py-2 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800 transition"
      onclick="window.open('mostani.html', '_self')">-</button>
    <button id="upcoming"
      class="block mx-auto mt-4 px-7 py-2 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800 transition"
      onclick="window.open('kovetkezo.html', '_self')">-</button>
    <button id="darkMode"
      class="block mx-auto mt-4 px-7 py-2 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800 transition">Sötét</button>
  </div>
</div>
  <script>
    const endpoint = "https://ferlaty.github.io/alvanyos-szolgalat-app/data.json";

    async function updateButtons() {
      try {
        const response = await fetch(endpoint);
        if (!response.ok) throw new Error("Network response failed");

        const data = await response.json();

        // Loop through all buttons in JSON
        data.buttons.forEach(btn => {
          const button = document.getElementById(btn.id);
          if (button) {
            button.textContent = btn.value;
          }
        });
      } catch (error) {
        console.error("Failed to fetch button data:", error);
      }
    }

    window.addEventListener("DOMContentLoaded", updateButtons);
  </script>

  <script>
    const element = document.body;
    const btn = document.getElementById("darkMode");

    // Load saved mode
    if (localStorage.getItem("Mode") === "dark") {
      element.classList.add("dark-mode");
      btn.textContent = "Világos";
    }

    btn.addEventListener("click", function () {
      const isDark = element.classList.toggle("dark-mode"); // true if now dark

      if (isDark) {
        localStorage.setItem("Mode", "dark");
        btn.textContent = "Világos";
      } else {
        localStorage.setItem("Mode", "light");
        btn.textContent = "Sötét";
      }
    });
  </script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-messaging.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCUuzbpOeZOFHxrFzL3gijeKtRw9e_veHM",
      authDomain: "alvanyos-szolgalat.firebaseapp.com",
      projectId: "alvanyos-szolgalat",
      storageBucket: "alvanyos-szolgalat.firebasestorage.app",
      messagingSenderId: "1037601102689",
      appId: "1:1037601102689:web:e4f22b9df0f8360f6d4320",
      measurementId: "G-K0WNX1LH9J"
    };

    const app = initializeApp(firebaseConfig);
    const messaging = getMessaging(app);

    // Request notification permission
    Notification.requestPermission().then(permission => {
      if (permission === "granted") {
        console.log("Notification permission granted.");
        getToken(messaging, { vapidKey: 'BHymTZNlOpi_K1Aqz1T86YsLpB0yk0bcgymzebhM2Uq65GivsquArPj6xfMBq4LqhCeyAqB9B3ag0ZGXMnCEeV4' }).then((currentToken) => {
          if (currentToken) {
            // Send the token to your server and update the UI if necessary
            // ...
            console.log("Token is: " + currentToken)
          } else {
            // Show permission request UI
            console.log('No registration token available. Request permission to generate one.');
            // ...
          }
        }).catch((err) => {
          console.log('An error occurred while retrieving token. ', err);
          // ...
        });
      }
    });
  </script>
</body>

</html>
